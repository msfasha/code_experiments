# Code that generates QA using OpenAI LLM
# This code was generated by ChatGPT

import openai
import os

# Initialize the OpenAI API with your key
openai.api_key = os.environ["OPENAI_API_MOHD_FASHA_KEY"]

def generate_qa_dataset(context, num_pairs=2):
    """Generate Q&A dataset using OpenAI's GPT-3 or GPT-4."""
    prompt = f"Generate {num_pairs} question-answer pairs based on the following context:\n\n{context}\n"
    
    response = openai.Completion.create(
        engine="text-davinci-003",  # Use "davinci" or another available engine
        prompt=prompt,
        max_tokens=500,  # Adjust as needed
        n=num_pairs,
        stop=None,
        temperature=0.7
    )
    
    # Extract Q&A pairs
    dataset = []
    for item in response.choices:
        lines = item.text.strip().split('\n')
        # if len(lines) == 2:
        #     dataset.append({
        #         "question": lines[0],
        #         "answer": lines[1]
        #     })
        [print(line) for line in lines]
    return dataset

# Test the function
context = """
The Earth revolves around the Sun in 365.25 days, which is why we have a leap year every four years. The process of photosynthesis in plants converts carbon dioxide into oxygen, making plants vital for life.
"""

qa_dataset = generate_qa_dataset(context)
for pair in qa_dataset:
    print(f"Question: {pair['question']}\nAnswer: {pair['answer']}\n")


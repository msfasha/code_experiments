# This file was generated by ChatGPT 4
# This file attempts to use gpt-3.5-turbo to generate QA pairs

import openai
import os

openai.api_key = os.environ["OPENAI_API_MOHD_FASHA_KEY"]

def generate_qa_pairs(context, num_pairs=5):
    questions = []
    answers = []
    messages = [{"role": "system", "content": "You are a helpful assistant that generates Arabic question and answer pairs based on a given  Arabic context."}]
    
    for i in range(num_pairs):
        # Ask the model to generate a question based on the context
        messages.append({"role": "user", "content": f"Based on the context: '{context}', what's a good question?"})
        response = openai.ChatCompletion.create(model="gpt-3.5-turbo", messages=messages)
        question = response['choices'][0]['message']['content']
        questions.append(question)

        # Now, get the answer to the generated question
        messages.append({"role": "user", "content": f"What is the answer to: '{question}' based on the context: '{context}'?"})
        response = openai.ChatCompletion.create(model="gpt-3.5-turbo", messages=messages)
        answer = response['choices'][0]['message']['content']
        answers.append(answer)
        
    return list(zip(questions, answers))

# Sample usage
context = """
ﺍﻟﻤﺎﺩﺓ (2) ﻳﻜﻮﻥ ﻟﻠﻌﺒﺎﺭﺍﺕ ﻭﺍﻻﻟﻔﺎﻅ ﺍﻟﺘﺎﻟﻴﺔ ﺍﻟﻮﺍﺭﺩﺓ ﻓﻲ ﻫﺬﺍ ﺍﻟﻘﺎﻧﻮﻥ ﺍﻟﻤﻌﺎﻧﻲ ﺍﻟﻤﺨﺼﺼﺔ ﻟﻬﺎ ﺃﺩﻧﺎﻩ ﺍﻻ ﺍﺫﺍ ﺩﻟﺖ ﺍﻟﻘﺮﻳﻨﺔ ﻋﻠﻰ ﺧﻼﻑ ﺫﻟﻚ:
ﺗﻌﻨﻲ ﻟﻔﻈﺔ (ﺍﻟﻤﻤﻠﻜﺔ): ﺍﻟﻤﻤﻠﻜﺔ ﺍﻻﺭﺩﻧﻴﺔ ﺍﻟﻬﺎﺷﻤﻴﺔ. ﻭﺗﺸﻤﻞ ﻋﺒﺎﺭﺓ (ﺍﻻﺟﺮﺍءﺍﺕ ﺍﻟﻘﻀﺎﺋﻴﺔ :) ﻛﺎﻓﺔ ﺍﻻﺟﺮﺍءﺍﺕ ﺍﻟﺘﻲ ﺗﺘﺨﺬ ﺃﻣﺎﻡ ﺃﻳﺔ ﻣﺤﻜﻤﺔ ﺃﻭ ﻣﺪﻋﻲ ﻋﺎﻡ ﺃﻭ ﻣﺠﻠﺲ ﻗﻀﺎﺋﻲ، ﺍﻭ ﻟﺠﻨﺔ ﺗﺤﻘﻴﻖ ﺃﻭ ﺷﺨﺺ ﻳﺠﻮﺯ ﺍﺩﺍء ﺍﻟﺸﻬﺎﺩﺓ ﺃﻣﺎﻣﻬﺎ ﺃﻭ ﺃﻣﺎﻣﻪ ﺑﻌﺪ ﺣﻠﻒ ﺍﻟﻴﻤﻴﻦ ﺳﻮﺍء ﻗﺎﻣﺖ ﻫﺬﻩ ﺍﻟﻤﺤﻜﻤﺔ ﺍﻭ ﺍﻟﻤﺠﻠﺲ ﺍﻟﻘﻀﺎﺋﻲ ﺃﻭ ﺍﻟﻠﺠﻨﺔ ﺃﻭ ﺫﻟﻚ ﺍﻟﺸﺨﺺ ﺑﺴﻤﺎﻉ ﺍﻟﺸﻬﺎﺩﺓ ﺑﻌﺪ ﺍﻟﻴﻤﻴﻦ ﺃﻭ ﺑﺪﻭﻥ ﺍﻟﻴﻤﻴﻦ. ﻭﺗﻌﻨﻲ ﻋﺒﺎﺭﺓ (ﺑﻴﺖ ﺍﻟﺴﻜﻦ:) ﺍﻟﻤﺤﻞ ﺍﻟﻤﺨﺼﺺ ﻟﻠﺴﻜﻨﻰ ﺃﻭ ﺃﻱ ﻗﺴﻢ ﻣﻦ ﺑﻨﺎﻳﺔ ﺍﺗﺨﺬﻩ ﺍﻟﻤﺎﻟﻚ ﺃﻭ ﺍﻟﺴﺎﻛﻦ ﺍﺫ ﺫﺍﻙ ﻣﺴﻜﻨﺎً ﻟﻪ ﻭﻟﻌﺎﺋﻠﺘﻪ ﻭﺿﻴﻮﻓﻪ ﻭﺧﺪﻣﻪ ﺃﻭ ﻷﻱ ﻣﻨﻬﻢ ﻭﺍﻥ ﻟﻢ ﻳﻜﻦ ﻣﺴﻜﻮﻧﺎً ﺑﺎﻟﻔﻌﻞ ﻭﻗﺖ ﺍﺭﺗﻜﺎﺏ ﺍﻟﺠﺮﻳﻤﺔ ، ﻭﺗﺸﻤﻞ ﺍﻳﻀﺎً ﺗﻮﺍﺑﻌﻪ ﻭﻣﻠﺤﻘﺎﺗﻪ ﺍﻟﻤﺘﺼﻠﺔ ﺍﻟﺘﻲ ﻳﻀﻤﻬﺎ ﻣﻌﻪ ﺳﻮﺭ ﻭﺍﺣﺪ. 
ﻭﺗﺸﻤﻞ ﻋﺒﺎﺭﺓ (ﺍﻟﻄﺮﻳﻖ ﺍﻟﻌﺎﻡ :) ﻛﻞ ﻁﺮﻳﻖ ﻳﺒﺎﺡ ﻟﻠﺠﻤﻬﻮﺭ ﺍﻟﻤﺮﻭﺭ ﺑﻪ ﻓﻲ ﻛﻞ ﻭﻗﺖ ﻭﺑﻐﻴﺮ ﻗﻴﺪ ﻓﻴﺪﺧﻞ ﻓﻲ ﻫﺬﺍ ﺍﻟﺘﻌﺮﻳﻒ ﺍﻟﺠﺴﻮﺭ ﻭﻛﺎﻓﺔ ﺍﻟﻄﺮﻕ ﺍﻟﺘﻲ ﺗﺼﻞ ﺍﻟﻤﺪﻥ ﺃﻭ ﺍﻟﺒﻼﺩ ﺑﻌﻀﻬﺎ ﺑﺒﻌﺾ ﻭﻻ ﻳﺪﺧﻞ ﻓﻴﻪ ﺍﻻﺳﻮﺍﻕ ﻭﺍﻟﻤﻴﺎﺩﻳﻦ ﻭﺍﻟﺴﺎﺣﺎﺕ ﻭﺍﻟﺸﻮﺍﺭﻉ ﺍﻟﻜﺎﺋﻨﺔ ﺩﺍﺧﻞ ﺍﻟﻤﺪﻥ ﺃﻭ ﺍﻟﺒﻠﺪﺍﻥ ﺃﻭ ﺍﻟﻘﺮﻯ ﻭﺍﻻﻧﻬﺎﺭ. 
ﻭﺗﺸﻤﻞ ﻋﺒﺎﺭﺓ (ﻣﻜﺎﻥ ﻋﺎﻡ ﺃﻭ ﻣﺤﻞ ﻋﺎﻡ :) ﻛﻞ ﻁﺮﻳﻖ ﻋﺎﻡ ﻭﻛﻞ ﻣﻜﺎﻥ ﺃﻭ ﻣﻤﺮ ﻳﺒﺎﺡ ﻟﻠﺠﻤﻬﻮﺭ ﺍﻟﻤﺮﻭﺭ ﺑﻪ ﺃﻭ ﺍﻟﺪﺧﻮﻝ ﺍﻟﻴﻪ ﻓﻲ ﻛﻞ ﻭﻗﺖ ﻭﺑﻐﻴﺮ ﻗﻴﺪ ﺃﻭ ﻛﺎﻥ ﻣﻘﻴﺪﺍً ﺑﺪﻓﻊ ﻣﺒﻠﻎ ﻣﻦ ﻟﻨﻘﻮﺩ ﻭﻛﻞ ﺑﻨﺎء ﺃﻭ ﻣﻜﺎﻥ ﻳﺴﺘﻌﻤﻞ ﺇﺫ ﺫﺍﻙ ﻷﻱ ﺍﺟﺘﻤﺎﻉ ﺃﻭ ﺣﻔﻞ ﻋﻤﻮﻣﻲ ﺃﻭ ﺩﻳﻨﻲ ﺃﻭ ﻛﺴﺎﺣﺔ ﻣﻜﺸﻮﻓﺔ.
ﻭﻳﻘﺼﺪ ﺑﻠﻔﻈﺘﻲ (ﺍﻟﻠﻴﻞ(ﺃﻭ)ﻟﻴﻼً:) ﺍﻟﻔﺘﺮﺓ ﺍﻟﺘﻲ ﺗﻘﻊ ﺑﻴﻦ ﻏﺮﻭﺏ ﺍﻟﺸﻤﺲ ﻭﺷﺮﻭﻗﻬﺎ. ﻭﻳﺮﺍﺩ ﺑﻠﻔﻈﺔ (ﺍﻟﺠﺮﺡ:) ﻛﻞ ﺷﺮﻁ ﺃﻭ ﻗﻄﻊ ﻳﺸﺮﻁ ﺃﻭ ﻳﺸﻖ ﻏﺸﺎء ﻣﻦ ﺃﻏﺸﻴﺔ ﺍﻟﺠﺴﻢ ﺍﻟﺨﺎﺭﺟﻴﺔ. ﻭﺍﻳﻔﺎء ﻟﻠﻐﺮﺽ ﻣﻦ ﻫﺬﺍ ﺍﻟﺘﻔﺴﻴﺮ ، ﻳﻌﺘﺒﺮ ﺍﻟﻐﺸﺎء ﺧﺎﺭﺟﻴﺎً ﺇﺫﺍ ﻛﺎﻥ ﻓﻲ ﺍﻻﻣﻜﺎﻥ ﻟﻤﺴﻪ ﺑﺪﻭﻥ ﺷﻄﺮ ﺃﻱ ﻏﺸﺎء ﺁﺧﺮ ﺃﻭ ﺷﻘﻪ."""

qa_pairs = generate_qa_pairs(context)

for q, a in qa_pairs:
    print(f"Question: {q}")
    print(f"Answer: {a}\n")
